{% assign productReviews = reviews | where: "productId", product.id %}
{% if productReviews.size > 0 %}
<section id="reviews" class="container py-5">
  <div id="productReviewCarousel-{{ product.id }}" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">

      {% for review in productReviews %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <div class="d-flex justify-content-center">
          <div class="card border-0" style="max-width: 600px;">
            <div class="d-flex align-items-center p-3">
              
              <!-- Reviewer image -->
              <div class="flex-shrink-0 me-3" style="width: 80px; height: 80px; overflow: hidden; border-radius: 50%;">
                <img src="{{ review.image }}" alt="{{ review.name }}" 
                     class="w-100 h-100" style="object-fit: cover;">
              </div>
              
              <!-- Text + name -->
              <div>
                <p class="mb-1 fst-italic">“{{ review.text }}”</p>
                <p class="mb-0 fw-bold text-muted">– {{ review.name }}</p>
              </div>

            </div>
          </div>
        </div>
      </div>
      {% endfor %}

    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#productReviewCarousel-{{ product.id }}" data-bs-slide="prev">
      <span class="text-secondary fs-3">&#8592;</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#productReviewCarousel-{{ product.id }}" data-bs-slide="next">
      <span class="text-secondary fs-3">&#8594;</span>
    </button>
  </div>
</section>
{% endif %}
