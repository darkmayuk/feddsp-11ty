{% comment %}
  Filter Logic:
  1. Get all products of type 'sample'.
  2. Exclude any that are marked "isFree: true" (reserved for the freebies section).
{% endcomment %}

{% assign all_samples = products | where: "type", "sample" %}
{% assign samples = "" | split: "" %}

{% for s in all_samples %}
  {% unless s.isFree %}
    {% assign samples = samples | push: s %}
  {% endunless %}
{% endfor %}

{% assign featured_sample = samples | first %}

<section class="sample-carousel-section position-relative d-flex flex-column align-items-center justify-content-center text-center py-5">

  <div class="video-bg-layer">
    {% if featured_sample.assets.heroVideo %}
      <video autoplay muted loop playsinline class="bg-video" poster="{{ featured_sample.assets.heroPoster }}">
        <source src="{{ featured_sample.assets.heroVideo }}" type="video/mp4">
      </video>
    {% endif %}
    <div class="video-overlay"></div>
  </div>

  <div class="container position-relative z-2 restrict-width">
    
    <h2 class="text-center text-uppercase mb-5">
      Looking for huge drum tones? Take your pick.
    </h2>

    <div class="swiper sample-swiper mb-4">
      <div class="swiper-wrapper">
        
        {% for s in samples %}
          <div class="swiper-slide" data-buy-link="{{ s.buyLink }}">
            <a href="/samples/{{ s.id }}/" class="sample-card d-block position-relative text-decoration-none text-white">
              
              <div class="sample-card-img-wrap rounded-4 overflow-hidden">
                {% image s.assets.heroImage, s.name, "(min-width: 768px) 33vw, 90vw", "img-fluid w-100" %}
              </div>

            </a>
          </div>
        {% endfor %}

      </div>
    </div>

    <p class="text-uppercase product-badge my-5">
      Kick & Snare One Shot Samples
    </p>

    <div class="d-flex justify-content-center align-items-center gap-3">
      <div class="swiper-pagination custom-indicators position-static m-0"></div>
      
      <a href="{{ featured_sample.buyLink }}" id="carousel-buy-btn" class="btn btn-pill btn-brand-solid px-4">
        BUY
      </a>
    </div>

  </div>
</section>